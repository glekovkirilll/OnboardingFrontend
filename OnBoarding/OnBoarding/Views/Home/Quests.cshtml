@model DivisionsAndQuests
@{
    ViewData["Title"] = "Quest Page";
}

<h1 class="m-3 noneCursor">Список квестов</h1>
<div class="container mt-3">
    <div class="row m-2">
        <button class="btn btn-modal col-2" style="margin-left: 0.5rem" data-toggle="modal" data-target="#createQuestModal">Создать задачу</button>
        

            @foreach (var item in Model.Divisions.divisions)
            {

                <div class="pointerCursor d-flex flex-row justify-content-between">
                    <div class="zeroBorderLeft" style="width: 100%;" data-toggle="collapse"
                     data-target="#block-name-podrazdelenie"
                     title="Нажмите для разворачивания блока">
                        <h3><b>@item.Name</b></h3>
                    </div>
                </div>

            }
            <a class="btn btn-modal mb-2" data-toggle="modal" data-target="#addQuestModal">Добавить квесты для подразделения</a>

            <div class="collapse" id="block-name-podrazdelenie">

                @foreach (var piece in Model.Quests.quests)
                {
                    <div class="list-group list-group-horizontal">
                        <div class="list-group-item flex-fill col-8 noneCursor">
                            @piece.Name
                        </div>
                        <div class="list-group-item flex-fill col-2 ml-auto">
                            <a class="btn btn-modal">Подробнее</a>
                        </div>
                        <div class="list-group-item flex-fill col-2 ml-auto">
                            <a class="btn btn-modal">Навигация</a>
                        </div>
                    </div>
                }

            </div>

        </div>
    </div>
</div>

<form method="post">
    <div class="modal fade" id="addQuestModal" tabindex="-1" role="dialog" aria-labelledby="addQuestModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addQuestModalLabel">Добавление квестов</h5>
                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <div class="dropdown">
                        <button class="btn btn-modal dropdown-toggle" type="button"
                                id="dropdownMenu1" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="true">
                            Выбор
                        </button>
                        <ul class="dropdown-menu checkbox-menu allow-focus" aria-labelledby="dropdownMenu1">
                            <li>
                                <label>
                                    <input type="checkbox"> Принести документы
                                </label>
                            </li>

                            <li>
                                <label>
                                    <input type="checkbox"> Познакомиться с начальником
                                </label>
                            </li>

                            <li>
                                <label>
                                    <input type="checkbox"> Найти куллер
                                </label>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-modal">Добавить</button>
                </div>
            </div>
        </div>
    </div>
</form>

<form method="post">
    <div class="modal fade" id="createQuestModal" tabindex="-1" role="dialog" aria-labelledby="createQuestModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createQuestModalLabel">Создать квест</h5>
                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="name-for-create-quest" class="col-form-label">Название</label>
                        <input type="text" name="name" class="form-control" id="name-for-create-quest">
                    </div>
                    <div class="mb-3">
                        <label for="description-for-create-quest" class="col-form-label">Описание</label>
                        <textarea type="text" name="description" class="form-control" id="description-for-create-quest"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-modal">Добавить</button>
                </div>
            </div>
        </div>
    </div>
</form>

<style>
    .checkbox-menu li label {
        display: block;
        padding: 3px 10px;
        clear: both;
        font-weight: normal;
        line-height: 1.42857143;
        color: #333;
        white-space: nowrap;
        margin: 0;
        transition: background-color .4s ease;
    }

    .checkbox-menu li input {
        margin: 0px 5px;
        top: 2px;
        position: relative;
    }

    .checkbox-menu li.active label {
        background-color: #cbcbff;
        font-weight: bold;
    }

    .checkbox-menu li label:hover,
    .checkbox-menu li label:focus {
        background-color: #f5f5f5;
    }

    .checkbox-menu li.active label:hover,
    .checkbox-menu li.active label:focus {
        background-color: #b8b8ff;
    }</style>

<script>
    $(".checkbox-menu").on("change", "input[type='checkbox']", function () {
        $(this).closest("li").toggleClass("active", this.checked);
    });

    $(document).on('click', '.allow-focus', function (e) {
        e.preventDefault();
    });
</script>